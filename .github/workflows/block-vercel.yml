name: Block Vercel Deployment

on:
  push:
    branches: [ main, master, develop ]
  pull_request:
    branches: [ main, master, develop ]
  workflow_dispatch:

jobs:
  block-vercel:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Block Vercel deployment
        run: |
          echo "üö´ Este projeto N√ÉO deve ser publicado no Vercel"
          echo "‚úÖ Use apenas Docker/Docker Compose para deploy"
          
          # Verificar se h√° configura√ß√£o do Vercel
          if [ -f "vercel.json" ]; then
            echo "‚ùå ERRO: Arquivo vercel.json encontrado!"
            echo "Removendo arquivo vercel.json..."
            rm -f vercel.json
            exit 1
          fi
          
          if [ -d ".vercel" ]; then
            echo "‚ùå ERRO: Diret√≥rio .vercel encontrado!"
            echo "Removendo diret√≥rio .vercel..."
            rm -rf .vercel
            exit 1
          fi
          
          echo "‚úÖ Nenhuma configura√ß√£o do Vercel encontrada"
